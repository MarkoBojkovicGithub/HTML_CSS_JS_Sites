(function(){var a=function(){function n(t){this.key="jsErrors",this.counter=0,this.errors={},this.options=t}return n.prototype.on=function(t,e){(this.options&&this.options.afterDCL?e.onDOMInteractive:function(r){return r()})(function(){window.addEventListener("error",function(r){var i=n.errorEventToError(r);i&&t(i)}),window.addEventListener("unhandledrejection",function(r){var i=n.rejectionEventToError(r);i&&t(i)})})},n.prototype.append=function(t){var e=t.stackTrace&&t.stackTrace.split("\n")[0];return this.options&&this.options.maxPerPi&&this.counter>=this.options.maxPerPi||this.errors[e]?null:(this.errors[e]=!0,this.counter+=1,t)},n.errorEventToError=function(t){return t.error?{message:t.error.message,stackTrace:t.error.stack,timestamp:Date.now()}:null},n.rejectionEventToError=function(t){var e=t.reason instanceof Error;return{message:e?t.reason.message:JSON.stringify(t.reason),stackTrace:e?t.reason.stack:null,timestamp:Date.now()}},n}();var u=function(){function n(){}return n.prototype.track=function(t){var e=this;t.onSpeedKitLoaded(function(){e.sendData(t),e.sendOriginData(t)}),t.onDfDataReady(function(){return e.sendOriginData(t)}),window.addEventListener("pagehide",function(){return e.sendData(t)})},n.prototype.sendData=function(t){if(SpeedKit.dynamicBlocks){var e={start:t.calculateRelative(SpeedKit.dynamicBlocks.start),status:SpeedKit.dynamicBlocks.status,received:t.calculateRelative(SpeedKit.dynamicBlocks.received),complete:t.calculateRelative(SpeedKit.dynamicBlocks.complete),errors:SpeedKit.dynamicBlocks.errors,localBlocks:SpeedKit.dynamicBlocks.localBlocks,remoteBlocks:SpeedKit.dynamicBlocks.remoteBlocks,mergedBlocks:SpeedKit.dynamicBlocks.mergedBlocks};t.set("dynamicFetcher",e)}},n.prototype.sendOriginData=function(t){SpeedKit.dynamicBlocks&&(t.set("originTTFB",SpeedKit.dynamicBlocks.originTTFB,!1),t.setTiming("originResponseStart",SpeedKit.dynamicBlocks.originResponseStart,!1))},n}();var c=function(){function n(){var t=this;this.time=0,this.key="largestContentfulPaint",this.isSupported()&&(this.po=new PerformanceObserver(function(e){var r=e.getEntries(),i=r[r.length-1];t.time=Math.round(i.startTime)}),this.po.observe({type:"largest-contentful-paint",buffered:!0}))}return n.prototype.on=function(t,e){e.onLeavePage(t),["keydown","click"].forEach(function(r){addEventListener(r,function(i){i.isTrusted&&t()},{capture:!0})})},n.prototype.set=function(){return this.po&&this.po.disconnect(),this.time?this.time:null},n.prototype.isSupported=function(){return typeof PerformanceObserver!="undefined"&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.indexOf("largest-contentful-paint")>=0},n}();var p=function(){function n(){var t=this;if(this.clsValue=null,this.sessionValue=0,this.clsEntries=[],this.sessionEntries=[],this.key="cumulativeLayoutShift",this.on="leavePage",this.isSupported()){this.clsValue=0,this.clsEntries=[],this.sessionValue=0,this.sessionEntries=[],this.po=new PerformanceObserver(function(r){for(var i=0,o=r.getEntries();i<o.length;i++){var s=o[i];e(s)}});var e=function(r){var i=r;if(!i.hadRecentInput){var o=t.sessionEntries[0],s=t.sessionEntries[t.sessionEntries.length-1];t.sessionValue&&r.startTime-s.startTime<1e3&&r.startTime-o.startTime<5e3?(t.sessionValue+=i.value,t.sessionEntries.push(i)):(t.sessionValue=i.value,t.sessionEntries=[i]),t.sessionValue>t.clsValue&&(t.clsValue=t.sessionValue,t.clsEntries=t.sessionEntries)}};this.po.observe({type:"layout-shift",buffered:!0})}}return n.prototype.set=function(){return typeof this.clsValue=="number"?this.clsValue:null},n.prototype.isSupported=function(){return typeof PerformanceObserver!="undefined"&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.indexOf("layout-shift")>=0},n}();var l=function(){function n(){this.data={},this.startTimestamp=Date.now(),this.listenerOpts={passive:!0,capture:!0}}return n.prototype.track=function(t){if(this.controller=t,this.listenScrollEvent(),this.isPerformanceObserverSupported())this.listenWithPerformanceObserver();else try{this.listenForInputEvents()}catch(e){}},n.prototype.listenScrollEvent=function(){var t=this,e=function(r){try{if(window.removeEventListener("scroll",e),t.data.firstInteractionTime)return;t.data.firstInteractionTime=t.calculateFirstInteractionTime(r.timeStamp),t.executeTracking()}catch(i){}};window.addEventListener("scroll",e)},n.prototype.isPerformanceObserverSupported=function(){return typeof PerformanceObserver!="undefined"&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.indexOf("first-input")>=0},n.prototype.calculateInputDelay=function(t){return(t.timeStamp>1e12?Date.now():performance.now())-t.timeStamp},n.prototype.calculateFirstInteractionTime=function(t){return t>1e12?t-performance.timing.navigationStart:t},n.prototype.listenWithPerformanceObserver=function(){var t=this;new PerformanceObserver(function(e){var r=e.getEntries(),i=r[r.length-1],o=i.processingStart,s=i.startTime;t.data.firstInputDelay=o-s,t.data.firstInputTime=t.calculateFirstInteractionTime(s),t.data.firstInteractionTime||(t.data.firstInteractionTime=t.data.firstInputTime),t.executeTracking()}).observe({type:"first-input",buffered:!0})},n.prototype.executeTracking=function(){this.controller&&(this.controller.set("firstInputDelay",this.data.firstInputDelay!==void 0?Math.round(this.data.firstInputDelay):void 0),this.controller.set("firstInput",this.data.firstInputTime?Math.round(this.data.firstInputTime):void 0),this.controller.set("firstInteraction",this.data.firstInteractionTime?Math.round(this.data.firstInteractionTime):void 0))},n.prototype.listenForInputEvents=function(){this.eachEventType(addEventListener)},n.prototype.removeInputEventListeners=function(){this.eachEventType(removeEventListener)},n.prototype.calculateFirstInteractionData=function(t){this.data.firstInputDelay!==void 0||this.data.firstInputTime||(this.data.firstInputDelay=this.calculateInputDelay(t),this.data.firstInputTime=this.calculateFirstInteractionTime(t.timeStamp),this.data.firstInteractionTime||(this.data.firstInteractionTime=this.data.firstInputTime),this.removeInputEventListeners(),this.notifyFirstInputDelayIfValid())},n.prototype.notifyFirstInputDelayIfValid=function(){this.data.firstInputTime&&this.data.firstInputDelay!==void 0&&this.data.firstInputDelay>=0&&this.data.firstInputDelay<Date.now()-this.startTimestamp&&this.executeTracking()},n.prototype.onPointerDown=function(t){var e=this,r=function(){e.calculateFirstInteractionData(t),o()},i=function(){o()},o=function(){try{removeEventListener("pointerup",r,e.listenerOpts),removeEventListener("pointercancel",i,e.listenerOpts)}catch(s){}};addEventListener("pointerup",r,this.listenerOpts),addEventListener("pointercancel",i,this.listenerOpts)},n.prototype.onInteraction=function(t){try{if(!t.cancelable||!t.isTrusted)return;if(t.type==="pointerdown")return this.onPointerDown(t);this.calculateFirstInteractionData(t)}catch(e){}},n.prototype.eachEventType=function(t){var e=this;["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(r){return t(r,e.onInteraction.bind(e),e.listenerOpts)})},n}();(function(){if(window!==window.top)return;window.SpeedKit=window.SpeedKit||{},SpeedKit.rumPlugins=[new c,new p,new a,new l,new u,{key:"pageType",type:"PiDimension",on:n,set:function(){var t=window.dataLayer,e=t.pages&&t.pages[0].page&&t.pages[0].page.attributes&&t.pages[0].page.attributes.template;if(e)return e.substring(e.lastIndexOf("/")+1)}},{key:"pageTypeEnabled",type:"PiDimension",on:"domInteractive",set:function(){var t=null;try{var e=!0;window.speedKit&&speedKit.enabledSites&&(e=speedKit.enabledSites.some(function(i){return i.pathname?i.pathname.some(function(o){return typeof o!="string"?o.test(location.pathname):location.pathname.indexOf(o)===0}):!1}));var r=!1;window.speedKit&&speedKit.disabledSites&&(r=speedKit.disabledSites.some(function(i){return i.pathname?i.pathname.some(function(o){return typeof o!="string"?o.test(location.pathname):location.pathname.indexOf(o)===0}):!1})),t=e&&!r?"true":"false"}catch(i){}return t}}];function n(t,e){e.onDOMInteractive(function(){function r(){var i=window.dataLayer;if(!i){setTimeout(r,500);return}t()}r()})}})();})();
(function(){(function(){var m=function(){var t=navigator.userAgent.toLowerCase(),o=t.indexOf("edge")>-1,a=!o&&t.indexOf("chrome")>-1,n=!a&&t.indexOf("safari")>-1;if(n){var s=t.match(/version\/([\d+\.]+)\s/i);if(s)return s[1]>="14"}return!0}(),e=["https://www.bmw.co.uk","https://www.bmw.de","https://www.bmw.at","https://www.bmw.ie","https://www.bmw.com.cy","https://www.bmw.mu","https://www.bmw.com.mt","https://www.bmw-m.com","https://www.bmw.co.jp","https://www.bmw.co.kr","https://www.bmw.ru","https://www.bmw.com.tr","https://www.bmw.com.mx","https://www.bmw.co.th","https://www.bmw.com.my","https://www.bmw.com.tw","https://www.bmw-voli.me","https://www.bmw.co.za","https://www.bmw.cl","https://www.bmw.co.id","https://www.bmw.ua","https://www.bmw.com.co","https://www.bmwhk.com","https://www.bmw.com.ar","https://www.bmw.co.il","https://www.bmw.com.sg","https://www.bmw.rs","https://www.bmw.ma","https://www.bmw.vn","https://www.bmw.com.ec","https://www.bmw.com.pe","https://www.bmw-egypt.com","https://www.bmw.com.ph","https://www.bmw.mq","https://www.bmw.lk","https://www.bmw.md","https://www.bmw.tm.dz","https://www.bmw.com.uy","https://www.bmw.com.mo","https://www.bmw.com.do","https://www.bmw.ba","https://www.bmw.hr","https://www.bmw.co.nz","https://www.bmw-me.com","https://www.bmw.co.cr","https://www.bmw.com.mk","https://www.bmw-tunisia.com","https://www.bmw.by","https://www.bmw-kz.com","https://www.bmw.com.py","https://www.bmw.com.pa","https://www.bmw.com.gt","https://www.bmw.es","https://www.bmw.gr","https://www.bmw.lt","https://www.bmw.ro","https://www.bmw.si","https://www.bmw.in","https://www.bmw.cz","https://www.bmw.pt","https://www.bmw.sk","https://www.bmw.com.bd","https://www.bmw.az","https://www.bmw.hn","https://www.bmw.com.bo","https://www.bmwjamaica.com","https://www.bmw.am","https://www.bmw.com.ge","https://www.bmw.cc","https://www.bmw.bm","https://www.bmw.pl","https://www.bmw.dk","https://www.bmw.fi","https://www.bmw.ca","https://www.bmw.it","https://www.bmw.ee","https://www.bmw.no","https://www.bmw.lv","https://www.bmw.se","https://www.bmw-tahiti.com","https://www.bmw.co.ao","https://www.bmw.tm","https://www.bmw.ci","https://www.bmw.fr","https://www.bmw.ch","https://www.bmw.lu","https://www.bmw.com.br","https://www.bmw.re","https://www.bmw.gp","https://www.bmw.bg","https://www.bmw.com.bn","https://www.bmw.tt","https://www.bmw.com.sv","https://www.bmw.nc","https://www.bmw.com.ky","https://www.bmw.co.ke","https://www.bmw.kg","https://www.bmw-nigeria.com","https://www.bmw-ghana.com","https://www.bmw.sn","https://www.bmwmyanmar.com","https://www.bmw.bb","https://www.bmw.uz","https://www.bmw.bs","https://www.bmw.lc","https://www.bmw-lao.la","https://www.bmw.cw","https://www.bmw.mn","https://www.bmw.sr","https://www.bmw-albania.com","https://www.bmw.com.kh","https://www.bmw.nl","https://www.bmw.be","https://www.bmw.hu","https://www.bmw-yemen.com","https://www.bmw.is","https://www.bmw.ly"];function w(){return e.some(function(t){return location.href.indexOf(t)>-1})}function i(){return 1}function c(){return"100"}window.speedKit={appName:"bmw",sw:"/wrapper-sw.js?r=6376633e-1df0-460d-83de-9a0e44cc305f&v=2.10.9",userAgentDetection:!1,rumTracking:w()&&window.activateSpeedKitRUM!==!1,split:i(),disabled:!w()||window.activateSpeedKit===!1,splitTestId:c(),enabledSites:[{pathname:[/\/index[\/.]/i,/\/home[\/.]/i,/\/topics[\/.]/i,/\/all-models[\/.]/i,/\/footer[\/.]/i,/\/models[\/.]/i,/\/fastlane[\/.]/i,/\/local-content[\/.]/i,"/de/neufahrzeuge","/de/neuwagensuche","/de/konfigurator","/de/landingpage/","/en/configurator","/fr/accueil","/fr/voiture-neuve","/fr/tous-les-modeles","/fr/gamme-bmw","/fr/configurateur.html","/ru/Online","/ru/general","/zh/news/","/zh/configurator","/ko/bmw-korea","/ko/discover","/ko/models","/ko/services","/tr/ssl/kampanya","/es/landing","/es/local","/es/modelos","/es/configurador","/es/integration/campana","/en/ssl/configurator","/th/ssl/configurator","/en/bmw-explore","/th/bmw-explore","/select-offers","/en_Za/integration/contact","/en/integration","/sr/ssl/Zakazivanje-serivsa.html","/es/landing-pages","/es/coches-bmw/","/es/informacion/","/es/configurator/","/es_ES/stocklocator.html","/es_ES/all-models/","/el_GR/configurator.html","/lt/konfiguratorius.html","/ro_RO/configurator.html","/sl/news-center","/pt_PT/configurator.html","/sk_SK/konfigurator.html","/pl/konfigurator.html","/APPS.html","/da/alle_modeller","/da/generelt","/da/byg-din-bmw.html","/fi/aiheet","/fi/rakenna-oma-bmw.html","/fi_FI/rakenna-oma-bmw.html","/fi/mallisto/","/it/gamma","/it_IT/configuratore.html","/et/configurator.html","/no_NO/bygg-din-bmw.html","/lv_LV/topics","/sv/bygg-din-bmw.html","/sv/alla-modeller","/sv/avdelning","/sv/sidfot","/de/bmw-neuwagen/","/de/bmw-neuwagen.html","/fidelidade","/nl/modellen.html","/nl/configurator.html","/nl/voorraad.html","/nl/specials","/nl_NL/specials","/nl/content/","/fr/configurateur.html","/hu/konfigurator.html","/hu_HU/konfigurator.html"]}],disabledSites:[{pathname:[/\?speedkit=off/i,/dealer-locator.html/i,/MyAccount.html/i,/mybmw/i,/mein-bmw/i,/mybmw-dashboard/i,/my-bmw/i,/topics\/offers-and-services\/used-automobiles\/our-offers\.html/,/\/lt\/topics\/offers-and-services\/bmw-online-store.html/,/\/content\/forms/i,/forms\/zamow-jazde-probna\/tda\.html/,"/da/generelt/kontakt/","/da_DK/topics/kontakt/",/locator\.html/,"/fi_FI/topics/contact/","/fi/aiheet/yhteydenotto/","/fi_FI/footer/contact/","/fi/footer/yhteydenotto/","/es/index.html"]}],whitelist:[{host:["www.bmw.","www.bmw-m.","www.bmw-voli.me","www.bmwhk.com","www.bmw-egypt.com","www.bmw-me.com","www.bmw-tunisia.com","www.bmw-kz.com","www.bmwjamaica.com","www.bmw-tahiti.com","www.bmwmyanmar.com","www.bmw-ghana.com","www.bmw-nigeria.com","www.bmw-lao.la","www.bmw-albania.com","www.bmw-yemen.com","assets.adobedtm.com","amplify.outbrain.com","static.criteo.net","s.pinimg.com","snap.licdn.com","bmw.admo.tv","static.iadvize.com","static.bmw.1dmp.io","static.ads-twitter.com","apps.mypurecloud.de","d.line-scdn.net","cdn.smartnews-ads.com"],contentType:["script","font","style","image","navigate"]},{url:["www.googleadservices.com/pagead/conversion_async.js","www.googletagmanager.com/gtag/js","cdn.rutarget.ru/static/tag/tag.js","mc.yandex.ru/metrika/tag.js"]}],blacklist:[{host:m?[]:["cosystatic.bmwgroup.com","cosy.bmwgroup.com"]},{host:["api.bmw.com","api-int.bmw.com","stocklocator-dealers.bmw.com","stocklocator-dealers.bmw-int.com","c2b-services.bmw.com","c2b-services-i.bmw.com"]},{pathname:[/login/i,/\/newsletteranmeldung/i,/checkout/i,/forms/i,/video.js\/video-js.min.css/,/\/settings\/wcm\/designs\/digitals2\/static\.css/,"/libs/wcm/msm/content/touch-ui/authoring/editor.min.4117887ca0f80cf30f8b0733f367af43.css","/libs/wcm/designimporter/components/touch-ui/clientlibs/editor.min.6635a2bba6ff8cb80d66ce9ac1ad815e.css","/libs/social/integrations/livefyre/components/authorizablecomponent/clientlibs.min.bef9a2b3bfc121e9d3116ba2be989f47.css","/libs/foundation/components/form/actions/mail/clientlibs.min.61c284a8a0358337305c6c732561dc4b.css","/libs/dam/remoteassets/components/clientlibs.min.825d7f462a23d8aa3da061f2044afa08.css","/libs/dam/cfm/clientlibs/authoring.min.bcda9c34faf5a23a2273f8751b846770.css","/libs/cq/flow/components/control/split/clientlibs.min.e804d986d7b4431f17a8896976e95f0d.css","/libs/commerce/gui/components/common/assetpicker/clientlibs.min.645f48a5116fe643b2062c4f76b75d82.css","/libs/commerce/components/addtocartimage/clientlib-authoring.min.ced22610c2d571622ce7285ef3946c0d.css","/etc.clientlibs/digitals2/navigate/components/navigation/clientlibs-author.min.css","/etc.clientlibs/core/wcm/components/commons/editor/clientlibs/panelselect.min.css","/etc.clientlibs/business/dealerlocator/components/par/dealerlocator/author/granite/filterServices/clientlibs.min.prod2.1.20210827-103225.min.css","/etc.clientlibs/business/dealerlocator/components/par/dealerlocator/author/granite/filterAddress/clientlibs.min.prod2.1.20210827-103225.min.css","/etc/cloudsettings.kernel.js/libs/settings/cloudsettings/legacy/contexthub","/etc/clientlibs/digitals2/clientlib/js/app/partials/0-sub-elements/ds2-video-layer-link.min.20210317121531.min.js","/etc.clientlibs/clientlibs/digitals2/ltr+requests.min","/etc/clientlibs/digitals2/clientlib/js/app/ds2-visualizer.min","/etc.clientlibs/digitals2/topics/components/detailinformation/clientlibs.min",/\/fahrzeugsuche/,/\/lagerwagen/,/\/stock-results/,/\/stocklocator/]},{url:[/registration/i,/gcdm/i,/\.pdf/i,/[?&](formtype|token)=/i,/[?&](_=1\d{12})/,/[?&]clc=/,/\/override\.css/i,"stream.bmw","bmw.scene7.com","api.bmw.com",/facebook/,/assets.adobedtm.com/,/omtrdc/,/linkedin/,/pinterest/,/sslwidget.criteo/,/demdex/,/doubleclick/,/googleads/,/googleadservices/,/\/pagead\//,/nocache/,/messagebusdefinition/,"www.bmw.co.nz/h5vco/finance/apps/html5-bmw-app.css","www.bmw.in/h5vco/finance/apps/html5-bmw-app.css",/minidigital/,/c2b-localsearch/i,/services/i,/api/i]},{cookie:["speedkit=off"],contentType:["document"]},{host:["www.bmw.in"],pathname:["/etc.clientlibs/settings/wcm/designs/digitals2/resources.css"]}],stripQueryParams:[{params:["gclid","msclkid","utm_source","utm_campaign","utm_medium","utm_content","utm_term","utm-source","utm-campaign","utm-medium","utm-content","utm-term","gclsrc","fbclid","ds_rl","dclid","cjid","campaign","yclid","mkwid","ctid","ccid","tblci","DMKW","DMSKW","DMCOL","n_campaign_type","sc_src","sc_lid","sc_uid","sc_llid","sc_customer","nspid","ac_delivery_internal_name","ac_delivery_label","ac_campaign_internal_name","ac_campaign_label",/^nx$/,/^ny$/,/^tl$/,"clkt","guid","_adp_p_ad","_adp_p_agr","_adp_e","_adp_c","_adp_p_cp","_adp_p_dm","_adp_p_md","_adp_u","s_kwcid","ef_id",/_kis_cup_/,"icp","bid","cid","hemaid","hucid",,"_ga"]}]}})();})();
(function(){(function(v,g,y,a,re,on,an){"use strict";var L="baqend-speedkit",H=L+"-user-id",z=L+"-session-id",_=L+"-session-index",X=L+"-session-timestamp";function oe(e,n,t,i){return Promise.resolve(e).then(function(r){return new Promise(function(o,c){var u=r.transaction(n,t),s=Promise.resolve(i(u.objectStore(n)));u.oncomplete=function(){return s.then(o)},u.onabort=u.onerror=function(){return c(u.error)}})})}function ae(e,n,t){return oe(e,n,"readwrite",t)}function Q(e,n){return n&&n!=="/"?""+(""+(n.lastIndexOf("/")===n.length-1?n.substr(0,n.length-1):n))+((e.indexOf("/")===0?"":"/")+e):e}var se=function(){function e(n){this.dbp=null,this.cacheName=Q(L,n),this.dbp=this.openDb()}return e.prototype.get=function(n){return(t=this.db(),i="baqend-speedkit-store",r=function(o){return o.get(n)},oe(t,i,"readonly",r)).then(function(o){return o.result||null});var t,i,r},e.prototype.set=function(n,t){return ae(this.db(),"baqend-speedkit-store",function(i){return i.put(t,n)&&void 0})},e.prototype.clear=function(){return Promise.all([(n=this.db(),t="baqend-speedkit-store",ae(n,t,function(i){return i.clear()}).then(function(){}))]).then(function(){});var n,t},e.prototype.disconnect=function(){var n=this;return this.dbp?this.dbp.then(function(t){n.dbp=null,t.close()}):Promise.resolve()},e.prototype.db=function(){return this.dbp||(this.dbp=this.openDb()),this.dbp},e.prototype.openDb=function(){var n=this,t=indexedDB.open(this.cacheName,1);return t.onupgradeneeded=function(i){var r=i.oldVersion,o=t.result;if(r<1){if(!o)return;try{o.createObjectStore("baqend-speedkit-store")}catch(c){}}},this.openRequest(t).then(function(i){return i.onclose=function(){n.dbp=null},i.onerror=function(){n.dbp=null},i.onversionchange=function(r){r.newVersion||(n.dbp=null,i.close())},i})},e.prototype.openRequest=function(n){return new Promise(function(t,i){n.onsuccess=function(){return t(n.result)},n.onerror=function(){return i(n.error)},n.onblocked=function(){return i(n.error)}})},e}();(function(){function e(){this.map=new Map}e.prototype.get=function(n){return Promise.resolve(this.map.get(n)||null)},e.prototype.set=function(n,t){return this.map.set(n,t),Promise.resolve()},e.prototype.clear=function(){return this.map.clear(),Promise.resolve()}})();function j(e){v.readyState!=="complete"?window.addEventListener("load",function(){return e()}):e()}function ce(e,n){try{if(g.sendBeacon&&g.sendBeacon(e,JSON.stringify(n)))return}catch(i){}var t=new XMLHttpRequest;t.open("POST",e,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(JSON.stringify(n))}function ue(e,n){return!(Array.isArray(e)&&!Array.isArray(n)||!Array.isArray(e)&&Array.isArray(n))&&typeof e==typeof n&&(Array.isArray(e)?e.length===n.length:typeof e=="object"?function(t,i){var r=0,o=0;for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&(r+=1,!ue(t[c],i[c])))return!1;for(var c in i)o+=1;return r===o}(e,n):e===n)}function de(e){v.readyState==="loading"?v.addEventListener("DOMContentLoaded",function(){return e()}):setTimeout(e,0)}function Le(e){v.querySelector("html.speed-kit-dynamic-loaded")?setTimeout(e,0):v.addEventListener("speed-kit-loaded",function(){return e()})}var Re=function(){function e(){this.dataLayerObservers=[]}return e.prototype.onDataLayer=function(n){if(!this.dataLayerObservers.length){var t=this.dataLayerObservers;this.observeDataLayer(function(){for(var i=function(s){var d=r;setTimeout(function(){s.apply({},d)},0)},r=arguments,o=0,c=t;o<c.length;o++){var u=c[o];i(u)}})}this.dataLayerObservers.push(n)},e.prototype.observeDataLayer=function(n){de(this.initDataLayer.bind(this,n))},e.prototype.initDataLayer=function(){var n=arguments[0],t=window.dataLayer;if(t){var i=t.push;t.push=function(){var c=Array.prototype.slice.call(arguments),u=i.apply(t,c);return n.apply(t,c),u};for(var r=0;r<t.length;r+=1)n.call(t,t[r])}else setTimeout(this.initDataLayer.bind(this,n),500)},e}();function x(e){return e===void 0&&(e=25),function(n){var t=[];t.length=n;for(var i=0;i<n;)t[i]=0,i+=1;return t}(e).map(function(){return Math.floor(62*Math.random())}).map(function(n){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[n]}).join("")}function K(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t={};return e.forEach(function(i){Object.keys(i).forEach(function(r){return t[r]=i[r]})}),t}var Be={performanceOnly:!1,stripAllParameter:!1,noCookies:!1,noTracking:!1,pageDisabled:!1};function k(){var e=K({},Be);return a.rumTracking?typeof a.rumTracking=="boolean"?e:K(e,a.rumTracking):K(e,{noTracking:!0})}function D(e){var n=null;if(typeof Storage!="undefined")try{n=localStorage.getItem(e)}catch(t){}return n}function Y(){var e,n=x(),t=0;if((e=D(X))&&(Date.now()-parseInt(e,10))/1e3<=1800){n=D(z);var i=""+(D(_)||-1);t=parseInt(i,10)+1}return[n,t]}function W(e,n){if(typeof Storage!="undefined")try{localStorage.setItem(e,n)}catch(t){}}var xe=["baqend-speedkit-user-id","baqend-speedkit-ab-test-info"];function N(e,n){if(W(e,n),!(k().noCookies||xe.indexOf(e)<0)){var t=a.cookieLifetime||180,i=new Date(Date.now()+24*t*60*60*1e3).toUTCString();try{v.cookie=e+"="+n+"; expires="+i+"; path=/; SameSite=Lax; Secure"}catch(r){}}}function R(e,n){n===void 0&&(n=!0);var t=D(e),i=function(o){try{var c=new RegExp(o+"=([^,;]*)"),u=v.cookie.match(c);return u&&u[1]?u[1]:null}catch(s){}return null}(e),r=t||i;return r&&t!==i&&n&&N(e,r),r}function pe(e){return e===void 0&&(e=!0),R(H,e)||x()}function E(e){(function(){if(!(window.SpeedKit&&window.SpeedKit.track)){var r=k(),o=r.noTracking||r.performanceOnly;if(window.SpeedKit=window.SpeedKit||{},window.SpeedKit.navigateId=window.SpeedKit.navigateId||""+x(32),window.SpeedKit.group=window.SpeedKit.group||"sk",window.SpeedKit.track=Ke,!window.SpeedKit.sessionId&&o){var c=Y(),u=c[0],s=c[1];window.SpeedKit.sessionId=u,window.SpeedKit.sessionIndex=s}o&&(window.SpeedKit.userId=window.SpeedKit.userId||pe())}})();var n={timestamp:Date.now(),message:"Install.js",stackTrace:"null"};if(function(r){return!!r&&("reason"in r||"message"in r)}(e)){var t=le(e)?e.reason.message||JSON.stringify(e.reason):e.message,i=le(e)?e.reason.stack:e.stack;n.message="Install.js: "+t,n.stackTrace=i||"null"}(function(r){fe("jsErrors",[r])})(n)}function le(e){return"reason"in e}function Ke(e,n,t){fe("events",[{action:""+e,label:""+n,value:isNaN(Number(t))?0:Number(t)}])}function fe(e,n){var t=k();if(!t.noTracking){var i={sessionId:SpeedKit.sessionId,userId:SpeedKit.userId},r={piId:SpeedKit.navigateId,testGroup:SpeedKit.group};r[e]=n;var o=t.performanceOnly?r:K(r,i);ce("https://"+(a.appDomain||"{}.app.baqend.com".replace("{}",a.appName))+"/v1/rum/pi",o)}}var Ae=function(){function e(n){this.rumController=n,this.triggerFunctions={domInteractive:this.rumController.onDOMInteractive,load:this.rumController.onLoad,speedKitLoaded:this.rumController.onSpeedKitLoaded,dataLayer:this.rumController.onDataLayer.bind(this.rumController),visibilityHidden:this.rumController.onVisibilityHidden,dfDataReady:this.rumController.onDfDataReady,leavePage:this.rumController.onLeavePage.bind(this.rumController)}}return e.prototype.initPlugin=function(n){n.type||(n.type="Data");var t=function(r){return r()};typeof n.on=="string"?n.on=this.triggerFunctions[n.on]||t:n.on=n.on||t;var i=this.generateCallbackFunction(n);try{n.on(i,this.rumController)}catch(r){E(r)}},e.prototype.generateCallbackFunction=function(n){var t=this;return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(n.track){var o=[t.rumController].concat(i);try{n.track.apply(n,o)}catch(d){E(d)}}else if(n.key&&(n.set||n.append||n.setTiming)){var c,u=t.getControllerFunction(n),s=t.getTrackingFunction(n);try{c=s.apply(n,i)}catch(d){E(d)}c!=null&&u.call(t.rumController,n.key,c)}}},e.prototype.getControllerFunction=function(n){return n.setTiming?this.rumController.setTiming:n.set?this.rumController.set:this.rumController.append},e.prototype.getTrackingFunction=function(n){return n.setTiming||n.set||n.append},e}();function qe(e){v.addEventListener("visibilitychange",function(){v.visibilityState==="hidden"&&e()},!0)}function Fe(e){SpeedKit&&SpeedKit.dynamicBlocks&&SpeedKit.dynamicBlocks.complete&&SpeedKit.dynamicBlocks.dataComplete||!v.querySelector("html.speed-kit-dynamic-loading")?setTimeout(e,0):v.addEventListener("dynamic-fetcher-data-ready",function(){return e()})}var P,Ue=function(){function e(){this.callbacks=[],this.unloaded=!1}return e.prototype.init=function(){var n=this;v.addEventListener("visibilitychange",function(){v.visibilityState==="hidden"?n.prepareBeforeLeaving("visibilityChange"):v.visibilityState==="visible"&&(n.unloaded=!1)}),"onpagehide"in window?window.addEventListener("pagehide",function(){return n.prepareBeforeLeaving("pagehide")}):(window.addEventListener("beforeunload",function(){return n.prepareBeforeLeaving("beforeunload")}),window.addEventListener("unload",function(){return n.prepareBeforeLeaving("unload")}))},e.prototype.onLeavePage=function(n){this.callbacks.push(n)},e.prototype.executeRemainingCallbacks=function(){for(var n=0,t=this.callbacks;n<t.length;n++)(0,t[n])();this.callbacks=[]},e.prototype.prepareBeforeLeaving=function(n){var t=SpeedKit;this.executeRemainingCallbacks(),U(t,n),this.unloaded=!0},e.prototype.isUnloaded=function(){return this.unloaded},e}();(function(e){e.Override="override",e.Append="append",e.Force="force",e.Once="once"})(P||(P={}));var b,ge,ve,A,q,S,F,Me=function(){function e(n,t,i){this.beaconIndex=0,this.init=this.getInit(n,t),this.sentTracking=Object.create(this.init),this.unsentTracking={},this.customTimers={},this.shouldTrackPI=i,this.dataLayerHandler=new Re,this.leavePageHandler=new Ue,this.customDimensions=[{name:"customPiDimensions",type:"PiDimension",dimensionData:{}},{name:"customSessionDimensions",type:"SessionDimension",dimensionData:{}}],this.onDOMInteractive=de,this.onLoad=j,this.onSpeedKitLoaded=Le,this.onDataLayer=this.dataLayerHandler.onDataLayer.bind(this.dataLayerHandler),this.onDfDataReady=Fe,this.onVisibilityHidden=qe,this.onLeavePage=this.leavePageHandler.onLeavePage.bind(this.leavePageHandler);var r=this.getPlugins();this.pluginHandler=new Ae(this),r.forEach(this.pluginHandler.initPlugin,this.pluginHandler),this.initCustomTimerData(r),this.initCustomDimensionData(r),this.leavePageHandler.init()}return e.prototype.reinitialize=function(n,t){this.init=this.getInit(n,t),this.sentTracking=Object.create(this.init),this.unsentTracking={},this.beaconIndex=0,this.shouldTrackPI=!0},e.prototype.reportEvent=function(n,t,i,r){if(!(t===void 0||t<0)&&(this.reportTracking(n,t),r!==void 0&&i)){var o=r-t;if(o<0)return;this.reportTracking(i,o)}},e.prototype.sendCurrentTracking=function(n){if(!k().noTracking){var t=this.getUnsentTracking();if(t){n&&(t.unloadType=n);var i="";t.beaconIndex===0&&(i="?pi=1"+(this.shouldTrackPI?"&bqpi=1":"")),this.shouldTrackPI=!1,ce(a.appURL+"/rum/pi"+i,t)}}},e.prototype.updateBaseDimension=function(n,t){this.init[n]=t},e.prototype.trackCustomEvent=function(n,t,i,r){r===void 0&&(r=!0);var o={action:""+n,label:""+t,value:isNaN(Number(i))?0:Number(i)};this.reportTracking("events",o,P.Append),r&&this.sendCollapsed()},e.prototype.set=function(n,t,i,r){var o;i===void 0&&(i=!0),r===void 0&&(r=!1),o=typeof r=="boolean"?r?P.Force:P.Override:r;var c=this.reportTracking(n,t,o);return i&&this.sendCollapsed(),c},e.prototype.setTiming=function(n,t,i,r){return i===void 0&&(i=!0),r===void 0&&(r=!1),typeof t=="number"?this.set(n,t-this.init.navigationStart,i,r):this.set(n,t,i,r)},e.prototype.append=function(n,t,i){i===void 0&&(i=!0),this.reportTracking(n,t,P.Append),i&&this.sendCollapsed()},e.prototype.getBeaconIndex=function(){return this.beaconIndex},e.prototype.calculateRelative=function(n){if(n!==void 0)return n-this.init.navigationStart},e.prototype.reportTracking=function(n,t,i){if(i===void 0&&(i=P.Override),t==null)return!1;var r=this.customDimensions.filter(function(s){return s.dimensionData.hasOwnProperty(n)})[0];if(r)return this.reportCustomDimension(n,t,r.type);if(this.customTimers.hasOwnProperty(n))return this.reportCustomTimer(n,t);if(i===P.Append){var o=Array.isArray(t)?t:[t],c=this.unsentTracking[n]!==void 0?this.unsentTracking[n]:[],u=Array.isArray(c)?c:[c];return this.unsentTracking[n]=u.concat(o),!0}return!(!Array.isArray(t)&&ue(t,this.sentTracking[n])&&i!==P.Force)&&(!this.sentTracking.hasOwnProperty(n)||i!==P.Once)&&(this.unsentTracking[n]=t,!0)},e.prototype.reportCustomDimension=function(n,t,i){if(typeof t!="string")return!1;var r=this.customDimensions.filter(function(c){return c.type===i})[0];if(!r||r.dimensionData[n]&&r.dimensionData[n]!=="null")return!1;r.dimensionData[n]=t;var o=this.unsentTracking[r.name]||{};return o[n]=t,this.unsentTracking[r.name]=o,!0},e.prototype.reportCustomTimer=function(n,t){if(typeof t!="number"||this.customTimers[n]&&this.customTimers[n]!==-1)return!1;this.customTimers[n]=t;var i=this.unsentTracking.customTimers||{};return i[n]=t,this.unsentTracking.customTimers=i,!0},e.prototype.getPlugins=function(){return window.SpeedKit&&window.SpeedKit.rumPlugins?window.SpeedKit.rumPlugins:[]},e.prototype.initCustomDimensionData=function(n){var t=this;n.forEach(function(i){i.key&&(t.customDimensions.every(function(r){return r.type!==i.type})||t.reportCustomDimension(i.key,"null",i.type))})},e.prototype.initCustomTimerData=function(n){var t=this;n.forEach(function(i){i.key&&i.type==="CustomTimer"&&(t.customTimers[i.key]=-1)})},e.prototype.getUnsentTracking=function(){if(Object.keys(this.unsentTracking).length===0)return null;var n=Object.create(null);for(var t in this.init)Object.prototype.hasOwnProperty.call(this.init,t)&&(n[t]=this.init[t]);for(var t in n.beaconIndex=this.beaconIndex,this.unsentTracking)Object.prototype.hasOwnProperty.call(this.unsentTracking,t)&&(n[t]=this.unsentTracking[t],this.sentTracking[t]=this.unsentTracking[t]);return this.unsentTracking=Object.create(null),this.beaconIndex+=1,n},e.prototype.sendCollapsed=function(){var n=this;this.leavePageHandler.isUnloaded()?this.sendCurrentTracking():setTimeout(function(){n.sendCurrentTracking()},100)},e.prototype.getInit=function(n,t){return k().performanceOnly?n:K(n,t)},e}();function he(e){return parseFloat((1-e).toFixed(2))}function me(){var e=typeof PerformanceNavigationTiming!="undefined"&&window.performance.getEntriesByType,n=performance.navigation;if(!e)return ye(n.type);var t=performance.getEntriesByType("navigation");return t[0]&&"toJSON"in t[0]?q[t[0].type]:ye(n.type)}function ye(e){return typeof e!="number"?q[e]:e}function Z(){return window.performance?performance.timing.navigationStart||Math.trunc(performance.timeOrigin):0}function Ge(e){var n=Z(),t=function(i){var r=function(){var p=typeof PerformanceNavigationTiming!="undefined"&&performance.getEntriesByType,f=window.performance.timing;if(!p)return f;var h=performance.getEntriesByType("navigation");return h[0]&&"toJSON"in h[0]?h[0].toJSON():f}(),o=window.performance.timing,c="entryType"in r,u={};for(var s in r)if(typeof r[s]=="number"){var d=r[s]!==0,l=o&&(typeof o[s]!="number"||o[s]!==0);u[s]=d||l?c?Math.trunc(r[s]):r[s]>=i?r[s]-i:r[s]:-1}else u[s]=r[s];return u.navigationStart=i,u.domLoading=o.domLoading-i,u.ttfb=c?u.responseStart:o.domLoading-i,u}(n);e.set("navigationStart",n,!1),e.set("secureConnectDuration",t.secureConnectionStart>=0&&t.connectEnd>=0?t.connectEnd-t.secureConnectionStart:-1,!1),e.reportEvent("unload",t.unloadEventStart,"unloadDuration",t.unloadEventEnd),e.reportEvent("domainLookup",t.domainLookupStart,"domainLookupDuration",t.domainLookupEnd),e.reportEvent("connect",t.connectStart,"connectDuration",t.connectEnd),e.reportEvent("redirect",t.redirectStart,"redirectDuration",t.redirectEnd),e.reportEvent("response",t.responseStart,"responseDuration",t.responseEnd),e.reportEvent("load",t.loadEventStart,"loadDuration",t.loadEventEnd),e.reportEvent("domContentLoaded",t.domContentLoadedEventStart,"domContentLoadedDuration",t.domContentLoadedEventEnd),e.reportEvent("request",t.requestStart),e.reportEvent("fetch",t.fetchStart),e.reportEvent("ttfb",t.ttfb),e.reportEvent("domComplete",t.domComplete),e.reportEvent("domInteractive",t.domInteractive),e.reportEvent("workerStart",t.workerStart)}function U(e,n){var t=e.rumController,i=!!a.secondaryGroup,r=e.lastNavigate.responseCause===b.BfCache,o=i?e.splitTestId+"-"+a.secondaryTestId:e.splitTestId,c=function(){if(k().stripAllParameter)return location.href.replace(/\?.*/,"?redacted");if(k().stripParameters){var s=new URL(location.href);return k().stripParameters.forEach(function(d,l){var p=new URL(location.href).searchParams.get(d)||"",f=p.length?d+"="+p:d;s.search=s.search.replace(new RegExp("(\\?|&)"+f),"$1redacted-"+l)}),s.href}return location.href}();i&&t.updateBaseDimension("testGroup",a.group+"-"+a.secondaryGroup),k().performanceOnly||t.set("sessionIndex",e.sessionIndex,!1);var u=Z();t.reportEvent("snippetExecution",e.executionTime-u),t.set("url",c,!1,P.Once),t.set("userAgent",g.userAgent,!1),t.set("referrer",v.referrer,!1),t.set("testId",o||"None",!1),t.set("responseSource",e.lastNavigate.responseSource,!1),t.set("assetTTFB",e.lastNavigate.assetTTFB,!1),t.set("assetSource",e.lastNavigate.assetSource,!1),t.set("firstLoad",e.lastNavigate.firstLoad,!1),t.set("disabled",e.disabled,!1),function(s,d){if(s.controllingServiceWorker&&d.set("controllingSw",s.controllingServiceWorker,!1),s.lastNavigate.responseCause!==b.Unknown&&d.set("responseCause",s.lastNavigate.responseCause,!1)&&d.set("responseSource",s.lastNavigate.responseSource,!1,!0),s.lastNavigate.disconnectCause!==A.None&&s.lastNavigate.disconnectCause!==A.DashboardDisabled&&d.set("disconnectCause",s.lastNavigate.disconnectCause,!1),typeof s.split=="number"){var l=s.group==="A"&&typeof a.secondarySplit=="number"?a.secondaryGroup==="B"?he(a.secondarySplit):a.secondarySplit:1;d.set("split",s.split*l,!1)}s.lastNavigate.splitTestId!==s.splitTestId&&d.set("actualTestId",""+s.lastNavigate.splitTestId,!1),s.lastNavigate.group!==s.group&&d.set("actualTestGroup",""+s.lastNavigate.group,!1)}(e,t),typeof window.performance===void 0||r||(Ge(t),function(s){var d=me();d!==void 0&&s.set("navigationType",d,!1)}(t),function(s){if(typeof PerformancePaintTiming!="undefined"&&window.performance.getEntriesByType){var d=performance.getEntriesByType("paint");if(d&&d.length){var l=d.find(function(h){return h.name==="first-paint"}),p=d.find(function(h){return h.name==="first-contentful-paint"});s.set("firstPaint",l?Math.round(l.startTime):-1,!1),s.set("firstContentfulPaint",p?Math.round(p.startTime):-1,!1)}}else if(window.performance!==void 0){var f=performance.timing.msFirstPaint;f&&(s.setTiming("firstPaint",f,!1),s.setTiming("firstContentfulPaint",f,!1))}}(t)),r||(function(s,d){s.lastNavigate.cdnBackendTime&&d.set("cdnBackendTime",s.lastNavigate.cdnBackendTime,!1),s.lastNavigate.cdnPoP&&d.set("cdnPop",""+s.lastNavigate.cdnPoP,!1)}(e,t),function(s,d){var l=s.lastNavigate?s.lastNavigate.timings:null;l&&(d.setTiming("speedKitFetchEvent",l.eventStart,!1),d.setTiming("speedKitHandle",l.handleStart,!1),l.handleStart!==void 0&&l.handleEnd!==void 0&&d.set("speedKitHandleDuration",l.handleEnd-l.handleStart,!1),l.cacheStart!==void 0&&l.cacheEnd!==void 0&&d.reportEvent("speedKitCacheLookup",l.cacheStart-l.handleStart,"speedKitCacheLookupDuration",l.cacheEnd-l.handleStart),l.fetchStart!==void 0&&l.fetchEnd!==void 0&&d.reportEvent("speedKitFetchCall",l.fetchStart-l.handleStart,"speedKitFetchCallDuration",l.fetchEnd-l.handleStart))}(e,t)),n?t.sendCurrentTracking(n):t.sendCollapsed()}function M(){return!!v.querySelector(".speed-kit-dynamic-loading,.speed-kit-dynamic-loaded")}function He(e){var n,t=!1,i=!1,r=!1,o=function(){t&&i&&r&&U(e)};j(function(){setTimeout(function(){t=!0,o()})}),function(c,u){c.readyState!=="complete"?window.addEventListener("speed-kit-completed",u,{once:!0}):u()}(e,function(){i=!0,o()}),n=function(){r=!0,o()},typeof PerformancePaintTiming!="undefined"&&window.performance.getEntriesByType&&performance.getEntriesByType("paint").length>0||typeof PerformanceObserver=="undefined"||typeof PerformancePaintTiming=="undefined"?n():new PerformanceObserver(n).observe({entryTypes:["paint"]}),window.addEventListener("pageshow",function(c){if(c.persisted){var u=Y(),s=u[0],d=u[1];SpeedKit.navigateId=""+x(32),SpeedKit.lastNavigate.responseCause=b.BfCache,SpeedKit.lastNavigate.responseSource=M()?S.AssetAPI:S.Origin,SpeedKit.sessionIndex=d,SpeedKit.executionTime=Date.now();var l=performance.timing.navigationStart||performance.timeOrigin,p={sessionId:s,userId:SpeedKit.userId},f={navigationStart:l,testGroup:SpeedKit.group,piId:SpeedKit.navigateId};SpeedKit.rumController.reinitialize(f,p),U(SpeedKit)}})}function J(e){e.readyState!=="complete"&&setTimeout(function(){var n,t,i,r;e.readyState="complete",n="speed-kit-completed",t=window,i===void 0&&(i={}),typeof CustomEvent=="function"?r=new CustomEvent(n,{detail:i}):(r=v.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,i),t.dispatchEvent(r)})}function Se(e,n,t,i){i===void 0&&(i=1e3);var r=!1;return t&&setTimeout(function(){return r?null:t()},i),new Promise(function(o,c){var u=new MessageChannel,s=u.port1,d=u.port2;s.onmessage=function(l){r=!0,o(l.data)},s.onmessageerror=function(l){return c(l.data)},e.postMessage(n,[d])})}function je(e,n){Se(e,{type:"get-navigate-info",clientURL:location.href},function(){n.lastNavigate.responseSource=M()?S.AssetAPI:S.Origin,n.lastNavigate.responseCause=b.NoSwResponse,J(n)}).catch(function(t){return E(t),null}).then(function(t){(function(i,r){if(!(!r||"wasCacheHit"in r)){if("reason"in r)return i.lastNavigate.applicationState=r.applicationState,i.lastNavigate.errorMessage=r.reason,void(r.applicationState===F.FAILED&&(i.lastNavigate.responseCause=b.SwFailed));r.firstLoad=i.lastNavigate.firstLoad;var o=r.responseSource===S.Origin;r.assetSource||r.assetTTFB||(r.assetSource=i.lastNavigate.assetSource,r.assetTTFB=i.lastNavigate.assetTTFB),i.lastNavigate=r,i.lastNavigate.applicationState=F.RUNNING,i.lastNavigate.responseCause=r.responseCause,i.lastNavigate.responseSource=o&&M()?S.SDN:r.responseSource,i.lastNavigate.originStatus=r.originStatus,i.lastNavigate.disconnectCause=r.disconnectCause,i.lastNavigate.assetTTFB=r.assetTTFB}})(n,t),J(n)})}function We(e){return fetch(a.appURL+"/config/VAPIDPublicKey").then(function(n){return n.arrayBuffer()}).then(function(n){return{applicationServerKey:n,userVisibleOnly:!0}}).then(function(n){return e.subscribe(n)}).then(function(n){var t={subscription:n,devicetype:"WebPush"};return fetch(a.appURL+"/db/Device/register",{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}).then(function(n){return n.status===200},function(){return!1})}function Je(){return"Notification"in window?Notification.requestPermission().then(function(e){return e==="denied"?"denied":e!=="granted"?"undecided":g[y].ready.then(function(n){var t=n.pushManager;return function(i){return i.getSubscription().then(function(r){return!!r})}(t).then(function(i){return!!i||We(t)})}).then(function(n){return n?"registered":"unregistered"})}):Promise.resolve("unsupported")}function $(e){var n=g[y];n&&n.ready.then(function(t){n.controller&&n.controller.postMessage({type:"update-device",data:e})}).catch(function(t){return E(t)})}function Ve(e){var n=g[y].controller;n&&n.postMessage({type:"bypass-deactivation",data:e})}function ze(){var e=g[y];e&&e.controller&&e.controller.postMessage({type:"connect"})}function _e(){var e=g[y];e&&e.controller&&e.controller.postMessage({type:"disconnect"})}function Xe(){var e=D("baqend-speedkit-hashing-salt");if(e)return e;var n=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="",r=0;r<32;r+=1)i+=t.charAt(Math.floor(Math.random()*t.length));return i}();return W("baqend-speedkit-hashing-salt",n),n}function Qe(e){return function(n,t){for(var i="",r=0;r<n.length;r+=1){var o=r%t.length;i+=(n.charCodeAt(r)^t.charCodeAt(o)).toString(32)}return i}(e,Xe())}function Ye(e){var n=g[y].controller;n&&n.postMessage({type:"offline",data:e})}function be(){var e=g[y].controller;e&&e.postMessage({type:"fetch-bloom-filter",data:!0})}function V(){return a.disabled||a.enabled===!1}function we(e){return e===b.SwUnsupported}function Ze(e){var n,t=a.group,i=window.SpeedKit||{};i.navigateId=i.navigateId||""+x(32);var r=i.userId,o=i.sessionId,c=i.sessionIndex,u=k(),s=!u.noTracking&&!u.performanceOnly;i.sessionId||(o=(n=s?Y():["",0])[0],c=n[1]),i.userId||(r=s?pe():""),function(C,G,te){var B=k();B.noTracking||B.performanceOnly||(N(H,C),N(z,G),N(_,""+te),N(X,Date.now().toString()))}(r,o,c);var d,l,p=i.navigateId,f={userId:r,sessionId:o},h={navigationStart:Z(),testGroup:t,piId:p},w=(d=e.responseCause,l=!k().pageDisabled,(V()||we(d))&&l&&a.group!=="B"),m=new Me(h,f,w),T=m.trackCustomEvent.bind(m),I={navigateId:p,userId:r,sessionId:o,sessionIndex:c,group:t,rumController:m,track:T,subscribe:Je,bypassDeactivation:Ve,activate:ze,deactivate:_e,split:typeof a.split=="number"?a.group==="B"?he(a.split):a.split:1,updateDevice:$,getHash:Qe,simulateOfflineMode:Ye,fetchBloomFilter:be,disabled:!1,lastNavigate:e,readyState:"loading",splitTestId:a.splitTestId,controllingServiceWorker:$e(),executionTime:Date.now()};return Object.keys(i).forEach(function(C){I[C]=i[C]}),window.SpeedKit=I,window.SpeedKit}function $e(){return g.serviceWorker&&g.serviceWorker.controller?g.serviceWorker.controller.scriptURL:null}function ke(e){var n=g[y].controller;n&&n.postMessage({event:e,type:"send-cookies",data:v.cookie})}function Te(e,n){var t=n==="baqend-speedkit-secondary-ab-test-info",i=function(o,c){var u=o.testId!=="undefined",s=o.group!=="undefined",d=c?a.secondaryTestId:a.splitTestId,l=u&&(p=o.testId,f=d,(p==null?void 0:p.replace("-debug",""))!==(f==null?void 0:f.replace("-debug",""))),p,f;if(s&&!l)return o.group;var h=c?a.secondaryGroup:a.group,w=c?a.secondarySplit:a.split;return function(m,T){return m===void 0?Math.random()<T?"A":"B":m}(h,w)}(e,t),r=t?a.secondaryTestId:a.splitTestId;return r&&(r=function(o){return D("baqend-speedkit-debug")!=="true"?o.replace("-debug",""):o.indexOf("-debug")>-1?o:o+"-debug"}(r)),function(o,c,u){s=u,d=encodeURIComponent(JSON.stringify(o)),l=encodeURIComponent(JSON.stringify(c)),l!==d&&l&&N(s,l);var s,d,l}(e,{group:i,testId:r},n),{group:i,splitTestId:r}}function Ie(e){var n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)\.?(\d+)?/i)||[],t=null;if(/trident/i.test(n[1]))return t=/\brv[ :]+(\d+)\.?(\d+)?/g.exec(e)||[],["IE",parseInt(t[1],10)||0,parseInt(t[2],10)||0];var i=function(o){if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/.test(o)){var c=o.match(/(OS |os |OS)(\d+)_?(\d+)?/i)||[];return["SafariWebView",parseInt(c[2],10)||0,parseInt(c[3],10)||0]}return null}(e)||function(o,c){if(c[1]==="Chrome"){var u=null;if((u=o.match(/\bEdg\/(\d+)\.?(\d+)?/)||o.match(/\bEdge\/(\d+)\.?(\d+)?/))!=null)return["Edge",parseInt(u[1],10),parseInt(u[2],10)||0];if((u=o.match(/\bOPR\/(\d+)\.?(\d+)?/))!=null)return["Opera",parseInt(u[1],10),parseInt(u[2],10)||0]}return null}(e,n);if(i!==null)return i;var r=n[2]?[n[1],parseInt(n[2],10),parseInt(n[3],10)||0]:[g.appName,parseInt(g.appVersion,10),0];return e.indexOf("Android")===-1&&(t=e.match(/version\/(\d+)\.?(\d+)?/i))!=null&&(r.splice(1,1,parseInt(t[1],10)),r.splice(2,1,parseInt(t[2],10)||0)),r}function Ce(){return R(H)===null}function en(e,n,t,i,r){var o=function(s,d,l){return!!g[y]&&!!g[y].getRegistrations&&function(p,f,h){return p==="Safari"?f!==15||h>=2:p==="Chrome"?f>=61:p!=="Firefox"||f!==59}(s,d,l)}(e,n,t)&&!i,c=Ce(),u=a.group==="B"||a.secondaryGroup==="B";return o?!u&&V()?[S.Origin,b.Disabled]:c?[S.Origin,b.FirstLoad]:!u&&r?[S.Origin,b.GroupChange]:g[y].controller?[M()?S.AssetAPI:S.Origin,b.Unknown]:[S.Origin,u?b.NonSKGroup:b.NoSwInstalled]:[S.Origin,b.SwUnsupported]}function ee(e,n,t){return e.put(""+n,new Response(null,{status:200,statusText:(i=t,JSON.stringify(i,function(r,o){return o instanceof RegExp?"regexp:/"+(c=o).source+"/"+(c.flags||""):o;var c}))}));var i}function nn(){var e=function(n){var t=n;if(a.includeServiceWorker){var i=n.indexOf("?")>=0?"&":"?";t+=i+"othersw="+a.includeServiceWorker}return t}(a.sw);return g[y].register(e,{scope:a.scope||"/"}).then(function(n){window.addEventListener("unload",function(){return ke("unload")}),function(t){j(function(){window.setTimeout(function(){if(t.active&&typeof PerformanceResourceTiming!="undefined"){var i=(window.performance.getEntriesByType?performance.getEntriesByType("resource"):[]).map(function(r){return{name:r.name,url:r.initiatorType}});Se(t.active,{type:"prewarm-fetch",data:i}).then(function(r){if(r.applicationState===F.FAILED)return function(o){return window.caches?caches.open(Q(L,a.scope)).then(function(c){var u=window.devicePixelRatio,s=window.screen.width,d=[[location.origin,v.cookie]];return Promise.all([ee(c,"/com.baqend.speedkit.screen",{dpr:u,width:s}),ee(c,"/com.baqend.speedkit.config",a),ee(c,"/com.baqend.speedkit.cookie",{origins:d})])}).then(function(){return o.postMessage({type:"init-cache"})}):Promise.resolve()}(t.active)})}},1e3)})}(n),function(t){t.navigationPreload&&function(i){if(i.active)return Promise.resolve(i.active);var r=i.waiting||i.installing;return new Promise(function(o){return r.onstatechange=function(){r.state==="activated"&&o(r)}})}(t).then(function(){a.navigationPreload?t.navigationPreload.enable():t.navigationPreload.disable()}).catch(E)}(n)})}function Ee(e){if(typeof Storage!="undefined")try{localStorage.removeItem(e)}catch(n){}try{v.cookie=e+"=; expires="+new Date().toUTCString()+"; path=/; SameSite=lax; Secure"}catch(n){}}function Pe(e){var n=R(e);if(n)return function(o){try{return JSON.parse(decodeURIComponent(o))}catch(c){return{group:"undefined",testId:"undefined"}}}(n);if(e==="baqend-speedkit-secondary-ab-test-info")return{group:"undefined",testId:"undefined"};var t=R("baqend-speedkit-ab-test-id"),i=R("baqend-speedkit-group"),r={group:i||"undefined",testId:t||"undefined"};return(t||i)&&N("baqend-speedkit-ab-test-info",encodeURIComponent(JSON.stringify(r))),r}function tn(){var e,n,t=!(D("baqend-speedkit-rum-opt-out")!=="1"&&!window.deactivateSpeedKitRUM),i=JSON.parse(D("baqend-speedkit-rum-split-enabled")||"{}"),r=!i.sessionId,o=i.sessionId===R("baqend-speedkit-session-id"),c=i&&i.sessionId?i.split!==!1:(n=Math.random()<((e=a.sampleRate)!==null&&e!==void 0?e:1),a.sampleRate&&W("baqend-speedkit-rum-split-enabled",JSON.stringify({split:n,sessionId:R("baqend-speedkit-session-id")})),n);if(a.rumTracking!==void 0&&!t&&c&&(o||r))return a.rumTracking;var u=a.rumTracking!==void 0&&a.rumTracking;return!(t||!c)&&u}(function(e){e.Blacklist="Blacklist",e.ClientError="ClientError",e.Redirect="Redirect",e.CORSRedirect="CORSRedirect",e.CriticalResource="CriticalResource",e.Delayed="Delayed",e.Disabled="Disabled",e.Disconnected="Disconnected",e.DynamicBlock="DynamicBlock",e.DynamicBlockPreload="DynamicBlockPreload",e.Error="Error",e.Fallback="Fallback",e.Fetchlist="Fetchlist",e.FirstLoad="FirstLoad",e.GroupChange="GroupChange",e.IgnoredAfterPOSTNavigate="IgnoredAfterPOSTNavigate",e.InternalServerError="InternalServerError",e.LoopDetected="LoopDetected",e.NavigationPreload="NavigationPreload",e.NonSKGroup="NonSKGroup",e.NoSwInstalled="NoSwInstalled",e.NoSwResponse="NoSwResponse",e.Offline="Offline",e.Onboarding="Onboarding",e.SafeScript="SafeScript",e.SwFailed="SwFailed",e.SwUnsupported="SwUnsupported",e.TrackingRequest="TrackingRequest",e.Unknown="Unknown",e.Immutable="Immutable",e.BfCache="BfCache"})(b||(b={})),function(e){e.CacheMiss="CacheMiss",e.ExpiredResponse="ExpiredResponse",e.InstantRefresh="InstantRefresh",e.InvalidCacheSketch="InvalidCacheSketch",e.ReloadCacheMode="ReloadCacheMode",e.UrlInCacheSketch="UrlInCacheSketch"}(ge||(ge={})),function(e){e.CacheHit="CacheHit",e.RevalidationWhitelist="RevalidationWhitelist"}(ve||(ve={})),function(e){e.SWException="SWException",e.BloomfilterException="BloomfilterException",e.DashboardDisabled="DashboardDisabled",e.ServerError="ServerError",e.None="None"}(A||(A={})),function(e){e[e.navigate=0]="navigate",e[e.reload=1]="reload",e[e.back_forward=2]="back_forward",e[e.prerender=3]="prerender",e[e.reserved=255]="reserved"}(q||(q={})),function(e){e.AssetAPI="AssetAPI",e.Shield="Shield",e.Storage="Storage",e.Edge="Edge",e.Collapsed="Collapsed",e.PendingAsset="PendingAsset",e.Stream="Stream",e.MissingCachingHeader="MissingCachingHeader",e.Generated="Generated",e.Origin="Origin",e.SwCache="SwCache",e.SDN="SDN"}(S||(S={})),function(e){e.INSTALLING="installing",e.RUNNING="running",e.FAILED="failed"}(F||(F={}));try{(function(){if(!window[re]){window[re]=!0;var e=window.location.href.match(/speed-kit-rum-opt-out=([01])/);e&&W("baqend-speedkit-rum-opt-out",e[1]);var n=function(){N("/com.baqend.speedkit.denied","false");var p=R("/com.baqend.speedkit.denied")===null;return Ee("/com.baqend.speedkit.denied"),p}(),t=function(){var p={group:"",testId:a.splitTestId};if(window.location.href.indexOf("disableSpeedKit=1")>=0?p.group="B":window.location.href.indexOf("enableSpeedKit=1")>=0&&(p.group="A"),p.group)return N("baqend-speedkit-ab-test-info",encodeURIComponent(JSON.stringify(p))),p}()||Pe("baqend-speedkit-ab-test-info"),i=Pe("baqend-speedkit-secondary-ab-test-info");(function(p,f){if(a.sw=a.sw||"/sw.js",a.split==null)a.group="A";else{var h=Te(p,"baqend-speedkit-ab-test-info");a.group=h.group,a.splitTestId=h.splitTestId}if(a.secondarySplit!=null&&a.group==="A"){var w=Te(f,"baqend-speedkit-secondary-ab-test-info");a.secondaryGroup=w.group,a.secondaryTestId=w.splitTestId}a.split!=null&&a.group&&(a.sw=(m=a.sw,T="gr",I=a.group,C=m.indexOf("?")>-1?"&":"?",""+m+C+T+"="+I));var m,T,I,C;if(a.rumTracking){var G=D("baqend-speedkit-rum-opt-out")==="1"||window.deactivateSpeedKitRUM;a.rumTracking=!G&&a.rumTracking}var te=!a.enableForWebViews&&(g.userAgent.toLowerCase().indexOf("wv)")>-1||(B=Ie(g.userAgent),B[0]==="SafariWebView"&&B[1]>=14)),B;if(a.disabled=a.enabled===!1||a.disabled||a.group==="B"||a.secondaryGroup==="B"||te||function(){return g.userAgent.indexOf("Edge")>=0}()||!!window.deactivateSpeedKit,a.appURL="https://"+(a.appDomain||"{}.app.baqend.com".replace("{}",a.appName))+"/v1",a.customVariation&&a.customVariation.forEach(function(O){O.variationFunction=typeof O.variationFunction=="function"?O.variationFunction.toString():O.variationFunction}),typeof a.customDevice=="function"){var ie=a.customDevice.call(null);a.customDevice=typeof ie=="string"?ie:null,Promise.resolve(ie).then(function(O){O&&$(O)}).catch(function(O){E(O)})}else a.customDevice&&$(a.customDevice)})(t,i);var r=function(p){var f=Ze(p);return f.disabled=a.group!=="B"&&a.secondaryGroup!=="B"&&!!V(),g[y]&&g[y].controller||!M()||(f.lastNavigate.responseSource=S.SDN),f}(function(p,f,h){var w=window.location.href,m=Ie(g.userAgent),T=m[0],I=m[1],C=en(T,I,m[2],p,f.group==="B"||h.group==="B"),G=C[0];return{url:w,browser:T,browserVersion:I,responseCause:C[1],responseSource:G,cdnBackendTime:null,cdnPoP:null,firstLoad:Ce(),splitTestId:f.testId,group:a.split!==void 0?f.group:a.group,disconnectCause:A.None}}(n,t,i));a.rumTracking=tn();var o=k();if(o.noCookies&&function(p){for(var f=0,h=v.cookie.replace(/\s/g,"").split(";").filter(function(I){return I.lastIndexOf(p,0)===0});f<h.length;f++){var w=h[f],m=w.indexOf("="),T=m>-1?w.substr(0,m):w;v.cookie=T+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax; Secure"}}(L),!o.noTracking&&!o.performanceOnly||a.sampleRate||[H,z,_,X].forEach(function(p){return Ee(p)}),o.noTracking||n||function(p){U(p),He(p)}(r),we(r.lastNavigate.responseCause)||(c=window.top!==window,location.protocol!=="https:"||!a.executeInIframe&&c))return void J(r);var c,u=g[y].controller;u?(je(u,r),ke("load"),function(p){g[y].addEventListener("message",function(f){var h=f.data,w=h.type,m=h.payload;if(w==="asset-response-timings"){var T=m.assetSource,I=m.assetTTFB,C=m.cdnPoP;p.lastNavigate.assetSource=T,p.lastNavigate.assetTTFB=I,p.lastNavigate.cdnPoP=C,U(p)}})}(r),(s=g.userAgent).indexOf("Safari")>-1&&s.indexOf("Edge")===-1&&s.indexOf("Chrome")===-1&&me()===q.reload&&be(),function(){if(!window.performance)return!1;if(!window.PerformanceNavigationTiming||!window.performance.getEntriesByType)return performance.navigation.redirectCount>0;var p=performance.getEntriesByType("navigation");return!!p.length&&p[0].redirectCount>0}()&&function(p){var f=g[y].controller;f&&f.postMessage({type:"report-redirect",data:p.disabled})}(r)):J(r);var s;if(V())return void Ne().catch(E);if(!u)return ne();d=!1,j(function(){d||(d=!0,ne())}),l=function(){setTimeout(function(){d||(d=!0,ne())},1e3)},v.readyState==="loading"?v.addEventListener("DOMContentLoaded",l):setTimeout(l,0);var d,l}})()}catch(e){E(e)}function ne(){De().catch(function(e){return SpeedKit.track("fillDatabaseError",""+e,Date.now()),Oe().then(function(){return De()})}).then(function(){return nn()}).catch(function(e){return E(e),Ne()}).catch(E)}function De(){var e=function(u){return u&&new URL(u,location.origin).pathname}(a.scope),n=new se(e),t=window.devicePixelRatio,i=window.screen.width,r=g.userAgent,o=a.customDevice,c=o?n.set("/com.baqend.speedkit.device",{device:o,userAgent:r}):Promise.resolve();return Promise.all([n.set("/com.baqend.speedkit.config",a),n.set("/com.baqend.speedkit.screen",{dpr:t,width:i}),n.set("/com.baqend.speedkit.cookie",{origins:[[location.origin,v.cookie]]}),rn(n),c]).then(function(){return n.disconnect()})}function rn(e){}function Ne(){var e=new URL(a.scope||"/",location.origin).toString(),n=new URL(a.sw||"/sw.js",location.origin),t=n.origin+n.pathname;return g[y].getRegistrations().then(function(i){return i.forEach(function(r){var o=function(c){var u=c.active||c.installing||c.waiting;if(!u)return"";var s=new URL(u.scriptURL);return s.origin+s.pathname}(r);r.scope===e&&o===t&&r.unregister()})}).catch(function(){return null}).then(function(){return Oe()})}function Oe(){return Promise.all([window.caches?caches.keys().then(function(n){var t=n.filter(function(i){return new RegExp("^"+Q(L,a.scope)+".*").test(i)});return Promise.all(t.map(function(i){return caches.delete(i)}))}):Promise.resolve(),(e=new se(a.scope),e.clear().then(function(){return e.disconnect()}))]);var e}})(document,navigator,"serviceWorker",typeof speedKit!="undefined"?speedKit:config,"SNIPPET_LOADED");})();